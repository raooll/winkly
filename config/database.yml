# config/database.yml
# Universal configuration for both local and production
# No environment variables needed - everything auto-detects

default: &default
  adapter: postgresql
  encoding: unicode
  schema_search_path: public
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>

clickhouse: &clickhouse
  adapter: clickhouse
  host: b4vsqe9hv3.ap-south-1.aws.clickhouse.cloud
  port: 8443
  database: default
  username: default
  password: DQl_lcUDGN4aK
  ssl: true
  ssl_verify: true
  migrations_paths: false
  database_tasks: false

development:
  primary:
    <<: *default
    database: winkly_development
    # No username/password needed - uses peer authentication
  clickhouse:
    <<: *clickhouse
    database_tasks: false

test:
  primary:
    <<: *default
    database: winkly_test
  clickhouse:
    <<: *clickhouse

production:
  primary:
    <<: *default
    database: winkly_production
    username: winkly
    password: winkly7879
    host: localhost
    port: 5432
  cable:
    <<: *default
    database: winkly_production
    username: winkly
    password: winkly7879
    host: localhost
    port: 5432
  queue:
    <<: *default
    database: winkly_production
    username: winkly
    password: winkly7879
    host: localhost
    port: 5432
  cache:
    <<: *default
    database: winkly_production
    username: winkly
    password: winkly7879
    host: localhost
    port: 5432
  clickhouse:
    <<: *clickhouse